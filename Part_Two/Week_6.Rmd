---
title: "Week_6"
author: "Burton Karger"
date: "9/30/2019"
output: html_document
---
Reading Data in
```{r}
library(tidyverse)
country_time <- read_csv("Part_Two/Data/country_timeseries.csv")
head(country_time, n = 3)
mex_deaths <- read_csv("Part_Two/Data/mexico_deaths.csv")
head(mex_deaths, n = 3)
mex_exp <- read_csv("Part_Two/Data/mexico_exposure.csv")
head(mex_exp, n = 3)
```
Joining the data using dplyr *_join (Inner: will only keep things that show up in both data sets, full: everything from either data set[adds NA for items that were in one set that don't exist in the other], left: takes everything from first data set and only pulls things from the other data that matches, right)
```{r}
library(lubridate)
library(ggplot2)
mexico <- full_join(mex_deaths, mex_exp, by = "day") %>% 
  select(day, deaths, temp_mean) %>% 
  mutate(day = mdy(day))

ggplot(data = mexico) +
  geom_point(mapping = aes(x = day, y = deaths), 
             size = 1.4, alpha = 0.5) +
  labs(x = "Date in 2008", y = "# of Deaths") +
  ggtitle("Mexico Data")
  theme_bw()
```
Cleaning Ebola data set
```{r}
library(tidyr)
library(readr)
library(lubridate)
library(dplyr)
library(ggplot2)
ebola <- read_csv("Data/country_timeseries.csv")

ebola <- pivot_longer(data = ebola,
                      cols = Cases_Guinea:Deaths_Mali,
                      names_to = "variable",
                      values_to = "count")
ebola <- mutate(ebola, Date = mdy(Date))
ebola <- separate(ebola, col = variable, into = c("type", "country"),
                  sep = "_")
ebola <- pivot_wider(ebola, names_from = "type",
                     values_from = "count")
ebola <- filter(ebola, !is.na(Cases))
ebola <- filter(ebola, !is.na(Deaths))
head(ebola)
```
Plotting ebola dataset
```{r}
ggplot(ebola, aes(x = Date, y = Cases))+
  geom_line()+
  facet_wrap("country", scales = "free_y", ncol = 4)
```

```{r}
ggplot(ebola, aes(x = Date, y = Deaths))+
  geom_line()+
  facet_wrap("country", scales = "free_y", ncol = 4)
```
Working with the VA death set in R

```{r}
data("VADeaths")
library(tibble)
VADeaths %>% 
  as_tibble() %>% 
  rownames_to_column(var = "age") %>%
  pivot_longer(cols = `Rural Male`:`Urban Female`,
               names_to = "variable",
               values_to = "deaths") %>% 
  separate(col = variable, into = c("Local", "Sex"), sep = " ") %>% 
  ggplot(aes(x = age, y = deaths, color = Sex)) +
  geom_point() +
  ggtitle("Deaths in Virginia Rural vs. Urban") +
  labs(y = "Death #", x = "Age Range") +
  facet_wrap("Local") +
  theme_bw()
```


